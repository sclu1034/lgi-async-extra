<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lgi-async-extra</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>


<aside id="sidebar" class="has-background-white-ter">
    <h1 class="title">lgi-async-extra</h1>
    <nav class="menu">
        <ul class="menu-list">
            <li><a class="" href="../index.html">Index</a></li>
        </ul>
        <p class="menu-label">Modules</p>
        <ul class="menu-list">
            <li>
                <a class="is-active">file</a>
                <ul>
                    <li><a href="#toc">Table of contents</a></li>
                    <li><a href="#Constructors">Constructors </a></li>
                    <li><a href="#Class_File">Class File </a></li>
                </ul>
            </li>
            <li><a href="../modules/stream.html">stream</a></li>
        </ul>
        <p class="menu-label">Source</p>
        <ul class="menu-list">
            <li><a href="../source/file.lua.html">file.lua</a></li>
            <li><a href="../source/stream.lua.html">stream.lua</a></li>
        </ul>
    </nav>
</aside>
<div id="content" class="content__wrapper">
    <section class="section section__module-description">
        <div class="container">
            <h1 class="title is-1">Module <em>file</em></h1>
            <h3 class="subtitle is-3">High level file handling library.</h3>
            <div class="content">
                <p><p> A file handle can be created through one of the constructor functions. File
 operations are performed on that handle.</p>

<p> The API is callback based, so the use of <a href="https://github.com/sclu1034/async.lua">async.lua</a> for composition is
 recommended. All callbacks receive an <code>err</code> value as first argument, and any non-error return values
 after that.
 The <code>err</code> value will be <code>nil</code> on success, or an error value otherwise. In almost all cases
 it will be an instance of <code>GLib.Error</code>:</p>

<pre>
read_non_existent_file(<span class="keyword">function</span>(err, data)
    <span class="global">print</span>(err) <span class="comment">-- or `print(err.message)`
</span>    <span class="global">assert</span>(err.domain == Gio.IOErrorEnum)
    <span class="comment">-- Checking the error code against a constant is the recommended way,
</span>    <span class="comment">-- but a bit verbose, due to LGI's mapping.
</span>    <span class="comment">-- See: https://github.com/pavouk/lgi/blob/master/docs/guide.md
</span>    <span class="global">assert</span>(err.code == Gio.IOErrorEnum[Gio.IOErrorEnum.NOT_FOUND])
<span class="keyword">end</span>)
</pre>


<p> Example to write and read-back a file:</p>

<pre>
<span class="keyword">local</span> f = File.new_for_path(<span class="string">"/tmp/foo.txt"</span>)
async.waterfall({
    <span class="keyword">function</span>(cb)
        <span class="comment">-- By default, writing replaces any existing content
</span>        f:write(<span class="string">"hello"</span>, cb)
    <span class="keyword">end</span>,
    <span class="keyword">function</span>(cb)
        <span class="comment">-- But we can also append to the file
</span>        f:write(<span class="string">"world"</span>, <span class="string">"append"</span>, cb)
    <span class="keyword">end</span>,
    <span class="keyword">function</span>(cb)
        f:read_all(cb)
    <span class="keyword">end</span>,
}, <span class="keyword">function</span>(err, data)
    <span class="global">print</span>(err)
    <span class="global">print</span>(data)
<span class="keyword">end</span>)
</pre>

</p>
            </div>
            <div class="field is-grouped is-grouped-multiline">
                <div class="control">
                    <div class="tags are-medium has-addons">
                        <span class="is-dark tag">License</span>
                        <span class="tag">GPL v3.0</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="section section__module-summary">
        <div class="container">
            <h2 id="toc" class="title is-3">Table of contents</h2>
            <h3 class="title is-4"><a href="#Constructors">Constructors </a></h3>
            <table class="table is-fullwidth is-striped">
                <tbody>
                    <tr>
                        <td class="name"><a href="#new_for_path">new_for_path(path)</a></td>
                        <td class="summary">Create a file handle for the given local path.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#new_for_uri">new_for_uri(uri)</a></td>
                        <td class="summary">Create a file handle for the given remote URI.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#new_tmp">new_tmp([template=".XXXXXX"])</a></td>
                        <td class="summary">Create a new file in a directory preferred for temporary storage.</td>
                    </tr>
                </tbody>
            </table>
            <h3 class="title is-4"><a href="#Class_File">Class File </a></h3>
            <table class="table is-fullwidth is-striped">
                <tbody>
                    <tr>
                        <td class="name"><a href="#File:read_stream">File:read_stream(cb)</a></td>
                        <td class="summary">Open a read stream.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:write_stream">File:write_stream([mode="replace"], cb)</a></td>
                        <td class="summary">Open a write stream.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:write">File:write(data[, mode="replace"], cb)</a></td>
                        <td class="summary">Write the data to the opened file.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:read_all">File:read_all(cb)</a></td>
                        <td class="summary">Read the entire file&rsquo;s content into memory.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:read_line">File:read_line(cb)</a></td>
                        <td class="summary">Read a line from the file.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:read_lines">File:read_lines(iteratee, final_callback)</a></td>
                        <td class="summary">Asynchronously iterate over the file line by line.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:move">File:move(destination, cb)</a></td>
                        <td class="summary">Move the file to a new location.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:delete">File:delete(cb)</a></td>
                        <td class="summary">Delete the file.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:trash">File:trash(cb)</a></td>
                        <td class="summary">Move the file to trash.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:query_info">File:query_info(attribute, cb)</a></td>
                        <td class="summary">Query file information.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:exists">File:exists(cb)</a></td>
                        <td class="summary">Check if the file exists.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:size">File:size(cb)</a></td>
                        <td class="summary">Query the size of the file.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:type">File:type(cb)</a></td>
                        <td class="summary">Query the type of the file.</td>
                    </tr>
                    <tr>
                        <td class="name"><a href="#File:get_path">File:get_path()</a></td>
                        <td class="summary">Get the file&rsquo;s path name.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section class="section section--Constructors ">
        <div class="container">
            <h2 class="title is-2" id="Constructors"><a href="#Constructors">Constructors </a></h2>
            <div class="section__content">
                <div id="new_for_path" class="box section__item">
                    <div class="block section__item__title">
                        <strong>new_for_path(path)</strong>
                        <a class="source-ref" href="../source/file.lua.html#66">line 66</a>
                    </div>

                    <div class="block content section__item__description">Create a file handle for the given local path. </p>

<p> This is a cheap operation, that only creates an in memory representation of the resource location.
 No I/O will take place until a corresponding method is called on the returned <code>File</code> object.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>path</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Returns:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><a class="type" href="../modules/file.html#File">File</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="new_for_uri" class="box section__item">
                    <div class="block section__item__title">
                        <strong>new_for_uri(uri)</strong>
                        <a class="source-ref" href="../source/file.lua.html#85">line 85</a>
                    </div>

                    <div class="block content section__item__description">Create a file handle for the given remote URI. </p>

<p> This is a cheap operation, that only creates an in memory representation of the resource location.
 No I/O will take place until a corresponding method is called on the returned <code>File</code> object.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>uri</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Returns:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><a class="type" href="../modules/file.html#File">File</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="new_tmp" class="box section__item">
                    <div class="block section__item__title">
                        <strong>new_tmp([template=".XXXXXX"])</strong>
                        <a class="source-ref" href="../source/file.lua.html#118">line 118</a>
                    </div>

                    <div class="block content section__item__description">Create a new file in a directory preferred for temporary storage. </p>

<p> If <code>template</code> is given, it must contain a sequence of six <code>X</code>s somewhere in the string, which
 will replaced by a unique ID to ensure the new file does not overwrite existing ones. The template must not contain
 any directory components.
 If <code>template == nil</code>, a default value will be used.</p>

<p> The directory is determined by <a href="https://docs.gtk.org/glib/func.get_tmp_dir.html">g_get_tmp_dir</a>.</p>

<p> The second return value is a <code>GIO.FileIOStream</code>, which contains both an input and output stream to the created
 file. The caller is responsible for closing these streams.</p>

<p> The third return value will be an instance of <code>GLib.Error</code> if the attempt to create the file failed. If this
 is not <code>nil</code>, attempts to access the other return values will result in undefined behavior.</p>

<p> See: <a href="https://docs.gtk.org/gio/type_func.File.new_tmp.html">Gio.File.new_tmp</a></div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>template</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">default</span>
                                            <span class="tag"><code>".XXXXXX"</code></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Returns:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><a class="type" href="../modules/file.html#File">File</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GIO.FileIOStream</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="section section--Class File ">
        <div class="container">
            <h2 class="title is-2" id="Class_File"><a href="#Class_File">Class File </a></h2>
            <div class="section__content">
                <div id="File:read_stream" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:read_stream(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#148">line 148</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description"><p>Open a read stream. </p>

<p> The consumer is responsible for properly closing the stream:</p>

<pre><code>stream:close_async(GLib.PRIORITY_DEFAULT, nil, function(_, token)
    local _, err = stream:close_finish(token)
    cb(err)
end)
</code></pre>

<p> The <a href="https://docs.gtk.org/gio/class.DataInputStream.html"><code>GDataInputStream</code></a> adds additional reading utilities:</p>

<pre><code>stream = Gio.DataInputStream.new(stream)
</code></pre>
</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">Gio.FileInputStream</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:write_stream" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:write_stream([mode="replace"], cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#178">line 178</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description"><p>Open a write stream. </p>

<p> Write operations are buffered, so the stream needs to be flushed (or closed)
 to be sure that changes are written to disk. Especially in <code>replace</code> mode,
 reading before flushing will yield stale content.</p>

<p> The consumer is responsible for properly closing the stream:</p>

<pre><code>stream:close_async(GLib.PRIORITY_DEFAULT, nil, function(_, token)
    local _, err = stream:close_finish(token)
    cb(err)
end)
</code></pre>
</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>mode</em></span>
                                    <span class="parameter__description">:&nbsp; Either <code>"append"</code> or <code>"replace"</code>.
  <code>"replace"</code> will truncate the file before writing, <code>"append"</code> will keep
  any existing content and add the new data at the end.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">default</span>
                                            <span class="tag"><code>"replace"</code></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">Gio.FileOutputStream</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:write" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:write(data[, mode="replace"], cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#222">line 222</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Write the data to the opened file.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>data</em></span>
                                    <span class="parameter__description">:&nbsp; The data to write.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>mode</em></span>
                                    <span class="parameter__description">:&nbsp; Either <code>"append"</code> or <code>"replace"</code>.
  <code>"replace"</code> will truncate the file before writing, <code>"append"</code> will keep
  any existing content and add the new data at the end.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">default</span>
                                            <span class="tag"><code>"replace"</code></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:read_all" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:read_all(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#263">line 263</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Read the entire file&rsquo;s content into memory.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                    <span class="parameter__description">:&nbsp; The callback to call when reading finished.
   Signature: <code>function(err, data)</code></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="return-value__description">
                                    <span>An instance of <code>GError</code> if there was an error,
   <code>nil</code> otherwise.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="return-value__description">
                                    <span>A string read from the file.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:read_line" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:read_line(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#322">line 322</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Read a line from the file. </p>

<p> Inefficient when reading lines repeatedly from the same file.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="return-value__description">
                                    <span>An instance of <code>GError</code> if there was an error,
   <code>nil</code> otherwise.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="return-value__description">
                                    <span>A string read from the file,
   or <code>nil</code> if the end was reached.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:read_lines" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:read_lines(iteratee, final_callback)</strong>
                        <a class="source-ref" href="../source/file.lua.html#365">line 365</a>
                    </div>

                    <div class="block content section__item__description">Asynchronously iterate over the file line by line. </p>

<p> This function opens a read stream and starts reading the file line-wise,
 asynchronously. For every line read, the given <code>iteratee</code> is called with any
 potential error, the line&rsquo;s content (without the trailing newline)
 and a callback function. The callback must always be called to ensure the
 file handle is cleaned up eventually. The expected signature for the callback
 is <code>cb(err, stop)</code>. If <code>err ~= nil</code> or a value for <code>stop</code> is given, iteration stops
 immediately and <code>final_callback</code> will be called.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>iteratee</em></span>
                                    <span class="parameter__description">:&nbsp; Function to call per line in the file. Signature:
   <code>function(err, line, cb)</code></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>final_callback</em></span>
                                    <span class="parameter__description">:&nbsp; Function to call when iteration has stopped.
   Signature: <code>function(err)</code>.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                </div>
                <div id="File:move" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:move(destination, cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#417">line 417</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Move the file to a new location. </p>

<p> Requires GLib version 2.71.2 or newer (2022-02-15).</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>destination</em></span>
                                    <span class="parameter__description">:&nbsp; New path to move to</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:delete" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:delete(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#441">line 441</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Delete the file. </p>

<p> This has the same semantics as POSIX <code>unlink()</code>, i.e. the link at the given
 path is removed. If it was the last link to the file, the disk space occupied
 by that file is freed as well.</p>

<p> Empty directories are deleted by this as well.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:trash" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:trash(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#460">line 460</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Move the file to trash. </p>

<p> Support for this depends on the platform and file system. If unsupported
 an error of type <code>Gio.IOErrorEnum.NOT_SUPPORTED</code> will be returned.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:query_info" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:query_info(attribute, cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#489">line 489</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Query file information. </p>

<p> This can be used to query for any file info attribute supported by GIO.
 The attribute parameter may either be plain string, such as <code>"standard::size"</code>, a wildcard <code>"standard::*"</code> or
 a list of both <code>"standard::*,owner::user"</code>.</p>

<p> GIO also offers constants for these attribute values, which can be found by querying the GIO docs for
 <code>G_FILE_ATTRIBUTE_*</code> constants:
 <a href="https://docs.gtk.org/gio/index.html?q=G_FILE_ATTRIBUTE_">https://docs.gtk.org/gio/index.html?q=G_FILE_ATTRIBUTE_</a></p>

<p> See: <a href="https://docs.gtk.org/gio/method.File.query_info.html"><code>g_file_query_info()</code></a></div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>attribute</em></span>
                                    <span class="parameter__description">:&nbsp; The GIO file info attribute to query for.</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">Gio.FileInfo</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:exists" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:exists(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#514">line 514</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Check if the file exists. </p>

<p> Keep in mind that checking for existence before reading or writing a file is
 subject to race conditions.
 An external process may still alter a file between those two operations.</p>

<p> Also note that, due to limitations in GLib, this method cannot distinguish
 between a file that is actually absent and a file that the user has no access
 to.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="return-value__description">
                                    <span><code>true</code> if the file exists on disk</span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">boolean</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:size" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:size(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#540">line 540</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Query the size of the file. </p>

<p> Note that due to limitations in GLib, this will return <code>0</code> for files
 that the user has no access to.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">number</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div id="File:type" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:type(cb)</strong>
                        <a class="source-ref" href="../source/file.lua.html#569">line 569</a>
                        <span class="tag">async</span>
                    </div>

                    <div class="block content section__item__description">Query the type of the file. </p>

<p> Common scenarios would be to compare this against <code>Gio.FileType</code>.</p>

<p> Note that due to limitations in GLib, this will return <code>Gio.FileType.UNKNOWN</code> for files
 that the user has no access to.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>
                            <li class="parameter">
                                <div>
                                    <span class="parameter__name"><em>cb</em></span>
                                </div>
                                <div class="field is-grouped is-grouped-multiline parameter__tags">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag"><span class="type">function</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Callback parameters:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><span class="type">GLib.Error</span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="block content section__item__usage">
                        <h4 class="title is-6">Usage:</h4>
                            <pre class="code-block code-block--lua">f:<span class="global">type</span>(<span class="keyword">function</span>(err, <span class="global">type</span>)
    <span class="keyword">if</span> err <span class="keyword">then</span> cb(err) <span class="keyword">end</span>
    <span class="keyword">local</span> is_dir = <span class="global">type</span> == Gio.FileType.DIRECTORY
    <span class="keyword">local</span> is_link = <span class="global">type</span> == Gio.FileType.SYMBOLIC_LINK
    <span class="keyword">local</span> is_file = <span class="global">type</span> == Gio.FileType.REGULAR
    <span class="comment">-- get a string representation
</span>    <span class="global">print</span>(Gio.FileType[<span class="global">type</span>])
<span class="keyword">end</span>)</pre>
                    </div>
                </div>
                <div id="File:get_path" class="box section__item">
                    <div class="block section__item__title">
                        <strong>File:get_path()</strong>
                        <a class="source-ref" href="../source/file.lua.html#582">line 582</a>
                    </div>

                    <div class="block content section__item__description">Get the file&rsquo;s path name. </p>

<p> The path is guaranteed to be absolute, by may contain unresolved symlinks.
 However, a path may not exist, in which case <code>nil</code> will be returned.</div>

                    <div class="block content section__item__params">
                        <h4 class="title is-6">Parameters:</h4>
                        <ul>

                        </ul>
                    </div>
                    <div class="block content section__item__returns">
                        <h4 class="title is-6">Returns:</h4>
                        <ul>
                            <li class="return-value">
                                <div class="field is-grouped is-grouped-multiline">
                                    <div class="control">
                                        <div class="tags has-addons">
                                            <span class="tag is-dark">type</span>
                                            <span class="tag return-value__type"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<footer class="footer">
    <div class="content has-text-centered">
        Generated by <a href="https://github/com/stevendonovan/LDoc">LDoc 1.4.6</a>, designed with <a href="https://github.com/jgthms/bulma">Bulma</a>. Last updated at 2022-03-06 19:47:57.
    </div>
</footer>

</body>
</html>
